window.settings=JSON.parse(file.get(PATH.settings));window.weights=JSON.parse(file.get(PATH.weights));0==settings.personalisation.startMaximised&&(get("switch-maximise").click(),menu.getMenuItemById("start-max").checked=!1);0==settings.personalisation.enableHardwareAcceleration&&get("switch-hardware-acceleration").click();window.addEventListener("load",()=>{0==settings.personalisation.server&&get("switch-server").click();get("switch-server").setAttribute("onswitch","updateSettings('personalisation', 'server', !this.vl, true, true);")});
get("theme-span").innerHTML=settings.personalisation.theme.capitaliseFirstLetter()+" <span style='float:right;'>&blacktriangledown;</span>";
function updateSettings(a,b,c,e=!1,d){if(a&&b){if(1==d||0==d)c=c?!0:!1;settings[a][b]=c;e&&alert("A restart of the app is required for all changes to take effect");"theme"==b&&(get("theme-span").innerHTML=c.capitaliseFirstLetter()+" <span style='float:right;'>&blacktriangledown;</span>",ipcRenderer.send("set-theme",c))}file.put(PATH.settings,JSON.stringify(settings))}
function updateWeights(){weights=weights.sort(DynamicSort("name"));file.put(PATH.weights,JSON.stringify(weights));get("list").innerHTML="";for(let a=0;a<weights.length;a++)get("list").innerHTML+=`<div>
<span>${weights[a].name}</span>
<span>${weights[a].weight}</span>
<span>
<select onchange="weights[${a}].side=this.value.toLowerCase();updateWeights();">
    <option${"any"==weights[a].side?" selected":""}>Any</option>
    <option${"left"==weights[a].side?" selected":""}>Left</option>
    <option${"right"==weights[a].side?" selected":""}>Right</option>
</select>
</span>
<span><input onchange="active(${a}, this)" name="person-check" type="checkbox"${weights[a].active&&" checked"}/></span>
<span><button style="background:red;border-radius:3px;" onclick="deleteWeight(${a});">Delete</button></span>
</div>`;get("balancer").getElementsByClassName("overlay")[0].style.display="flex"}updateWeights();function deleteWeight(a){confirm("Are you sure that you want to delete "+weights[a].name+" from this list?",`(function(res) {
        if (res == 1) {
            weights.splice(${a}, 1);
            updateWeights();
        }
    })(\${c})`)}function active(a,b){weights[a].active=b.checked;updateWeights()}get("select-all").addEventListener("change",a=>{for(let b=0;b<weights.length;b++)weights[b].active=a.target.checked;updateWeights()});
